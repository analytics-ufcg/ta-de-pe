<div class="view-container">
  <app-barra-titulo
    titulo="Alertas"
    [exibirVoltar]="true"></app-barra-titulo>

  <app-spinner *ngIf="loading$ | async"></app-spinner>

  <div
    [hidden]="loading$ | async"
    class="container mt-4">
    <div class="container">
      <div class="row justify-content-md-center">
        <div class="col-13 col-sm-13 col-md-4 d-print-none">
          <span class="text-muted">Selecione o tipo de alerta:</span>
          <app-menu-alerta
            (alertaFilterChange)="filterAlertas($event)"
            *ngIf="alertas"></app-menu-alerta>
        </div>
        <div class="col-13 col-sm-13 col-md-8">
          <app-filtro-alertas (filterChange)="search($event)"></app-filtro-alertas>
          <div class="d-flex flex-row-reverse">
            <small *ngIf="alertas?.length !== 0" class="text-secondary">{{alertas?.length}} alertas encontrados</small>
          </div>
          
          <div *ngIf="alertas?.length === 0">Nenhum alerta encontrado.</div>
          <div>
            <app-card-alerta
              *ngFor="let alerta of alertas | paginate: { itemsPerPage: 10, currentPage: p }; index as i;"
              [alerta]="alerta">
            </app-card-alerta>
          </div>
          <pagination-template
            #pag="paginationApi"
            maxSize="5"
            (pageChange)="pageChange($event)">
            <nav
              aria-label="Paginação"
              class="pb-1">
              <ul class="pagination justify-content-center">
                <li class="page-item">
                  <button
                    type="button"
                    class="page-link"
                    [disabled]="pag.isFirstPage()"
                    (click)="pag.previous()">
                    <span class="icon-chevron-left"></span>
                  </button>
                </li>
                <li
                  class="page-item"
                  *ngFor="let page of pag.pages"
                  [class.active]="pag.getCurrent() === page.value">
                  <button
                    type="button"
                    class="page-link"
                    (click)="pag.setCurrent(page.value)">
                    {{ page.label }}
                  </button>
                </li>
                <li class="page-item">
                  <button
                    type="button"
                    class="page-link"
                    [disabled]="pag.isLastPage()"
                    (click)="pag.next()">
                    <span class="icon-chevron-right"></span>
                  </button>
                </li>
              </ul>
            </nav>
          </pagination-template>
        </div>
      </div>
    </div>

  </div>
</div>
